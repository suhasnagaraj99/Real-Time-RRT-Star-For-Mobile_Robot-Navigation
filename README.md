# Real-Time-RRT-Star-For-Mobile_Robot-Navigation

### Project Description
This repository contains the implementation of the RT-RRT* Algorithm for mobile robot navigation, developed as part of ENPM661 Project 5.

### Required Libraries
- Ros2 Humble and Gazebo (along with required ros2 packages) have to be installed before running the scripts
- Ensure that the following Python libraries are also installed:
  - `numpy`
  - `matplotlib`
  - `math`
  - `transforms3d`

You can install them using pip if they are not already installed:

```bash
pip install numpy math matplotlib transforms3d
```

### Setup Instructions

1. **Copy the Packages**

   - Copy the 3 packages, `project5_dynamic_goal`, `project5_dynamic_obstacle` and `turtlebot3_project5`, into the src folder of a ROS 2 workspace.

2. **Build the Packages**

   - Open a terminal in the root of your ROS 2 workspace and build the packages using the following command:
     ```bash
     colcon build
     ```

3. **Source the Workspace**

   - After the build is complete, source the workspace by running:
     ```bash
     source install/setup.bash
     ```


## 1. Dynamic Obstacle Scenario

When there are dynamic obstacles in the environment of a mobile robot, the path generated by regular RRT* algorithm will not hold good over time. Hence, in this Real Time version of RRT*, the current position of the dynamic obstacle is also taken as an input to plan an optimal path around it in real time. In this project, a Turtlebot3 waffle is considered as the mobile robot for which the path is planned in real time, whereas, a Turtlebot3 burger is considered as the dynamic obstacle in the environment. 

### Running the Code
Follow these steps to run the code:

1. **Launch the Robot along with the Dynamic Obstacle in a Gazebo environment**

   - Open a new terminal tab, source the workspace, and launch the Robot in the gazebo environment with the following command:
     ```bash
     ros2 launch turtlebot3_project5 competition_world2.launch.py
     ```

2. **Run the RT-RRT * Node**

   - In another new terminal tab, source the workspace, and run the RT-RRT* node with:
     ```bash
     ros2 run project5_dynamic_obstacle rt_rrtstar
     ```

3. **Input Goal Coordinates**

   - When prompted, provide the goal x and goal y coordinates in the terminal.

4. **Pathfinding and Movement**

   - The RT-RRT* node will generate an initial path; After analyzing the path, close the pop up window to start the simulation
   - An updated map will be generated everytime the turtlebot reaches a node; Close the pop up of the updated path/map to resume simulation; Repeat this step until the turtlebot reaches the goal

### Demo Inputs

You can use the following demo inputs to test the code:

- **Goal Node:**
  - x-coordinate: 1425
  - y-coordinate: -700


## 2. Dynamic Goal Scenario

Similar to scenario 1, when the robot is trying to reach a dynamic goal (chasing the goal), the the path generated by regular RRT* algorithm will not hold good over time. Hence, similarly, in this Real Time version of RRT*, the current position of the dynamic goal is also taken as an input to plan an optimal path to it in real time. In this project, a Turtlebot3 waffle is considered as the mobile robot for which the path is planned in real time. 

### Running the Code
Follow these steps to run the code:

1. **Launch the Robot in a Dynamic Goal Gazebo environment**

   - Open a new terminal tab, source the workspace, and launch the Robot in the gazebo environment with the following command:
     ```bash
     ros2 launch turtlebot3_project5 competition_world.launch.py
     ```

2. **Run the RT-RRT * Node**

   - In another new terminal tab, source the workspace, and run the RT-RRT* node with:
     ```bash
     ros2 run project5_dynamic_goal rt_rrtstar 
     ```

3. **Input Goal Coordinates**

   - When prompted, provide the goal x and goal y coordinates in the terminal.

4. **Pathfinding and Movement**

   - The RT-RRT* node will generate an initial path; After analyzing the path, close the pop up window to start the simulation
   - After some time, an updated path for the new goal will be generated; close the map pop up to resume the simulation; Repeat this step until the turtlebot reaches the goal

### Demo Inputs

You can use the following demo inputs to test the code:

- **Goal Node:**
  - x-coordinate: 5000
  - y-coordinate: -300


 ## Important Notes

- **Sourcing Workspace:** Remember to source the workspace before running the code in any new terminal. This ensures that ROS 2 packages are properly found.
- **TurtleBot3 Model:** There is no need to select the TurtleBot3 model manually from `bashrc` as the launch files are configured to always use the Waffle model.
- **Dependencies:** Ensure that all required dependencies are installed before running the code. Missing dependencies may prevent the system from working correctly.
- **Node Sampling:** When the code is run, in some cases there will be no path generated due to the randomness of node sampling. In such cases "No Path" will be displayed in the terminal.Please restart the node in such cases.
- **Note:** The turtlebot3_project5 package contains the necessary launch and other files needed to launch the turtlebot in gazebo for simulation. To ensure accurate path following by the turtlebot, we have implemented a PID controller. The complete execution time is around 5 to 10 minutes for all the ros2 simulations. Most of the time is taken by the robot to accuratly move between the waypoints/nodes in the path and not for generating the path.


## Additional information 
- Please refer to the report for more information - [Project Report](https://drive.google.com/file/d/1PeJiYZv1Jo530UKeclSFwYzwDOYVgSOU/view?usp=sharing)
- If you encounter issues, double-check that all steps have been followed correctly.
- Ensure that all necessary packages and dependencies are installed and up-to-date.
- For further assistance, please consult the [ROS 2 documentation](https://docs.ros.org/en/humble/)
